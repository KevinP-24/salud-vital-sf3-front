<div class="container mt-4">
  <h3>Agendar Nueva Cita M√©dica</h3>
  <form (ngSubmit)="agendar()" #form="ngForm" class="mt-3">

    <!-- üîπ ID Paciente -->
    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">ID Paciente</label>
        <input
          type="text"
          [(ngModel)]="cita.idPaciente"
          name="idPaciente"
          class="form-control"
          required
        />
      </div>
    </div>

    <!-- üîπ Especialidad -->
    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Especialidad</label>
        <select
          [(ngModel)]="especialidadSeleccionada"
          name="especialidad"
          class="form-select"
          (change)="cargarMedicosPorEspecialidad()"
          required
        >
          <option value="" disabled>Seleccione una especialidad</option>
          <option *ngFor="let e of especialidades" [value]="e">{{ e }}</option>
        </select>
      </div>
    </div>

    <!-- üîπ Lista de m√©dicos filtrados -->
    <div class="row mb-3" *ngIf="medicosFiltrados.length > 0">
      <div class="col-md-6">
        <label class="form-label">M√©dico</label>
        <select
          [(ngModel)]="cita.idMedico"
          name="idMedico"
          class="form-select"
          required
        >
          <option value="" disabled>Seleccione un m√©dico</option>
          <option *ngFor="let m of medicosFiltrados" [value]="m.id">
            {{ m.nombre }} {{ m.apellido }}
          </option>
        </select>
      </div>
    </div>

<!-- üîπ Fecha y hora -->
<div class="row mb-3">
  <div class="col-md-4">
    <label class="form-label">Fecha</label>
    <input
      type="date"
      [(ngModel)]="cita.horario.fecha"
      name="fecha"
      class="form-control"
      required
    />
  </div>

  <div class="col-md-4">
    <label class="form-label">Hora inicio</label>
    <input
      type="time"
      [(ngModel)]="cita.horario.horaInicio"
      name="horaInicio"
      class="form-control"
      required
    />
  </div>

  <div class="col-md-4">
    <label class="form-label">Hora fin</label>
    <input
      type="time"
      [(ngModel)]="cita.horario.horaFin"
      name="horaFin"
      class="form-control"
      required
    />
  </div>
</div>


    <!-- üîπ Botones -->
    <button type="submit" class="btn btn-success me-2">Agendar</button>
    <a routerLink="/citas" class="btn btn-secondary">Cancelar</a>
  </form>
</div>
